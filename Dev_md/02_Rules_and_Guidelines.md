# 2. 개발 규칙 및 가이드라인

## 2.1. 코드 컨벤션
- **언어**: Python
- **스타일 가이드**: `ruff` 포맷터 및 린트 규칙을 준수합니다.
- **네이밍**:
  - 클래스: `PascalCase` (e.g., `NewsClient`)
  - 함수/변수: `snake_case` (e.g., `get_news`)
  - 상수: `UPPER_SNAKE_CASE` (e.g., `API_KEY`)
  - 파일명: `snake_case` (e.g., `news_client.py`)

## 2.2. Git 브랜치 전략
- `main`: 배포 가능한 안정 버전.
- `develop`: 다음 릴리스를 위한 개발 브랜치.
- `feature/이름`: 기능 개발 브랜치.

## 2.3. 커밋 메시지 규칙
- **형식**: `타입: 제목` (e.g., `feat: Add news feed component`)
- **타입 종류**:
  - `feat`: 새로운 기능 추가
  - `fix`: 버그 수정
  - `docs`: 문서 수정
  - `style`: 코드 스타일 변경 (포매팅 등)
  - `refactor`: 코드 리팩토링
  - `test`: 테스트 코드 추가/수정
  - `ci`: CI/CD 관련 변경

---
*이하 내용은 프로젝트 기획 단계에서 식별된 주요 리스크와 그에 대한 대응 방안을 정리한 것입니다.*

## 2.4. 프로젝트 리스크 및 대응 방안

1.  **저작권/전재 문제**:
    -   **리스크**: 기사 원문 전체를 저장·공유하면 저작권 침해 리스크가 큽니다.
    -   **대응**: 앱에서는 원문 링크와 함께 생성된 짧은 요약만 제공하고, 원문은 최소한으로 인용합니다.

2.  **본문 수집의 한계**:
    -   **리스크**: NewsAPI는 원문 전문을 제공하지 않는 경우가 많고, 웹 스크래핑은 실패할 수 있습니다.
    -   **대응**: "가능하면 추출, 불가하면 설명 메시지 + 링크" 전략을 채택했습니다. `text_extract.py`에서 본문 추출 실패 시, 제목과 설명으로 대체 텍스트를 생성합니다.

3.  **API 비용/쿼터**:
    -   **리스크**: 요약·감성 API 호출이 많아지면 비용이 급증할 수 있습니다.
    -   **대응**: `summarizer.py`와 `sentiment.py`에 인메모리 캐시를 구현하여 동일한 텍스트에 대한 중복 API 호출을 방지합니다.

4.  **프롬프트 주입(Injection)**:
    -   **리스크**: 기사 본문에 악성 지시문이 포함되어 의도치 않은 동작을 유발할 수 있습니다.
    -   **대응**: Gemini API 호출 시, 명확한 역할을 부여하는 시스템 프롬프트를 사용하여 모델이 원래의 작업(요약, 감성 분석)에만 집중하도록 지시합니다.

5.  **모델 편향/오판**:
    -   **리스크**: 특히 뉴스 기사는 중립적인 내용이 많아 감성 분석 모델이 오판할 수 있습니다.
    -   **대응**: `README.md`와 앱 내에 스코어 해석 가이드를 제공하고, 사용자가 직접 긍정/부정 임계값(Threshold)을 조절할 수 있는 옵션을 UI에 추가했습니다.

6.  **속도**:
    -   **리스크**: 다수의 기사를 순차적으로 분석하면 사용자가 오래 기다려야 합니다.
    -   **대응**: Streamlit의 `st.progress`를 사용하여 각 기사 처리 단계를 시각적으로 표시하여 사용자 경험을 개선했습니다.

7.  **예외 처리 UX**:
    -   **리스크**: 일부 기사 분석에 실패해도 전체 앱이 중단되어서는 안 됩니다.
    -   **대응**: 각 기사 처리 로직을 `try-except` 블록으로 감싸, 특정 기사에서 요약이나 감성 분석 실패 시 해당 항목에만 "실패" 메시지를 표시하고 전체 프로세스는 계속 진행되도록 구현했습니다.

8.  **로그/개인정보**:
    -   **리스크**: 사용자가 입력하는 검색 키워드가 민감할 수 있습니다.
    -   **대응**: 서버 측 로그에 사용자 입력값을 최소한으로 기록하는 것을 원칙으로 합니다. (현재 구조에서는 서버 로그가 없음)

9.  **배포 환경변수 관리**:
    -   **리스크**: API 키가 소스 코드에 노출되거나 Git에 커밋될 수 있습니다.
    -   **대응**: `.env` 파일을 사용하여 로컬 환경 변수를 관리하고, 이 파일은 `.gitignore`에 등록하여 커밋되지 않도록 합니다. 배포 환경(Streamlit Cloud 등)에서는 GitHub Secrets를 사용하도록 `README.md`에 명시했습니다.

10. **재현성**:
    -   **리스크**: 개발 환경과 배포 환경의 차이로 인해 앱이 다르게 동작할 수 있습니다.
    -   **대응**: `requirements.txt` 파일을 통해 모든 라이브러리의 버전을 고정하고, GitHub Actions를 통한 CI를 구성하여 일관된 환경에서 테스트가 이루어지도록 했습니다.