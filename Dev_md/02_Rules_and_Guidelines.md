# 2. 개발 규칙 및 가이드라인

## 2.1. 코드 컨벤션
- **언어**: Python (백엔드), TypeScript (프론트엔드)
- **스타일 가이드**:
    - 백엔드: `ruff` 포맷터 및 린트 규칙 준수.
    - 프론트엔드: `ESLint`, `Prettier` (또는 프로젝트에 설정된) 규칙 준수.
- **네이밍**:
  - 클래스/타입/인터페이스: `PascalCase` (e.g., `NewsClient`, `AnalysisResult`)
  - 함수/변수: `camelCase` (프론트엔드), `snake_case` (백엔드)
  - 상수: `UPPER_SNAKE_CASE`
  - 파일명: `kebab-case` 또는 `PascalCase` (프론트엔드 컴포넌트), `snake_case.py` (백엔드)

## 2.2. Git 브랜치 전략
- `main`: 배포 가능한 안정 버전.
- `develop`: 다음 릴리스를 위한 개발 브랜치.
- `feature/이름`: 기능 개발 브랜치.

## 2.3. 커밋 메시지 규칙
- **형식**: `타입: 제목` (e.g., `feat: Add news feed component`)
- **타입 종류**:
  - `feat`: 새로운 기능 추가
  - `fix`: 버그 수정
  - `docs`: 문서 수정
  - `style`: 코드 스타일 변경 (포매팅 등)
  - `refactor`: 코드 리팩토링
  - `test`: 테스트 코드 추가/수정
  - `ci`: CI/CD 관련 변경

---
*이하 내용은 React/FastAPI 아키텍처(v2.0) 기준으로 재평가된 주요 리스크와 대응 방안입니다.*

## 2.4. 프로젝트 리스크 및 대응 방안

1.  **API 키 노출**:
    -   **리스크**: 사용자가 API 키를 프론트엔드 UI에 직접 입력하고 이를 API 요청을 통해 백엔드로 전달하면, 클라이언트 측 코드나 네트워크 요청을 통해 키가 노출될 위험이 있습니다.
    -   **대응**: 백엔드는 서버 환경 변수(`NEWS_API_KEY`, `LLM_API_KEY` 등)에 설정된 키를 우선적으로 사용합니다. 환경 변수가 설정되지 않은 경우에만 UI에서 전달된 키를 사용하도록 폴백 로직을 적용합니다. 이를 통해 보안에 민감한 배포 환경에서는 환경 변수를 사용하고, 로컬 테스트/데모 환경에서는 UI를 통한 유연한 키 입력을 지원합니다. (단기) 입력 필드를 `type="password"`로 설정하여 화면에 노출되지 않도록 합니다.

2.  **본문 수집의 한계**:
    -   **리스크**: 특정 웹사이트는 동적 콘텐츠 렌더링(JavaScript)을 사용하거나 스크래핑 방지 기술을 적용하여, `requests`와 `BeautifulSoup`만으로는 본문 수집에 실패할 수 있습니다.
    -   **대응**: 현재와 같이 1차적으로 `requests`를 사용하되, 실패율이 높을 경우 `Selenium` 또는 `Playwright` 같은 브라우저 자동화 도구를 도입하여 JavaScript 렌더링 후의 HTML을 파싱하는 방안을 고려합니다.

3.  **API 비용/쿼터**:
    -   **리스크**: 다수의 사용자가 LLM API를 호출하면 비용이 급증할 수 있습니다.
    -   **대응**: 백엔드 서비스(`summarizer`, `sentiment` 등)에 인메모리 캐시를 구현하여 동일한 기사 URL에 대한 중복 API 호출을 방지합니다. 향후 `Redis` 같은 외부 캐시 저장소 도입을 고려할 수 있습니다.

4.  **프롬프트 주입(Injection)**:
    -   **리스크**: 기사 본문에 악성 지시문이 포함되어 의도치 않은 동작을 유발할 수 있습니다.
    -   **대응**: LLM API 호출 시, 명확한 역할을 부여하고 사용자 입력을 명확히 구분하는 시스템 프롬프트를 사용하여 모델이 원래의 작업(요약, 감성 분석)에만 집중하도록 지시합니다.

5.  **CORS (Cross-Origin Resource Sharing) 문제**:
    -   **리스크**: 개발 및 배포 환경에서 프론트엔드(예: `localhost:3000`)와 백엔드(예: `localhost:8000`)의 Origin이 달라 브라우저에서 API 요청이 차단될 수 있습니다.
    -   **대응**: 백엔드(FastAPI)에 `CORSMiddleware`를 설정하여 허용할 프론트엔드 Origin 목록을 명시적으로 관리합니다.

6.  **상태 관리의 복잡성**:
    -   **리스크**: 프론트엔드(React)에서 로딩, 에러, 분석 결과 등 관리해야 할 상태가 많아지면 `useState`만으로는 코드가 복잡해질 수 있습니다.
    -   **대응**: 현재는 `useState`로 충분하지만, 기능이 더 복잡해지면 `React Context`나 `Zustand`, `Redux Toolkit` 같은 상태 관리 라이브러리 도입을 검토합니다.

7.  **의존성 및 환경 불일치**:
    -   **리스크**: 프론트엔드와 백엔드의 개발 환경(Node.js, Python 버전 등)이 달라 팀원 간 또는 개발/배포 환경 간에 문제가 발생할 수 있습니다.
    -   **대응**: `docker-compose.yml`을 통해 프론트엔드와 백엔드의 환경을 컨테이너로 격리하고 고정합니다. `package.json`과 `requirements.txt`에 의존성 버전을 명시하여 재현성을 보장합니다.

8.  **예외 처리 UX**:
    -   **리스크**: 백엔드 API 호출 실패 시, 사용자에게 원인 불명의 오류 화면만 보일 수 있습니다.
    -   **대응**: 백엔드는 오류 발생 시 명확한 오류 메시지를 담은 JSON을 반환하고, 프론트엔드는 이 메시지를 받아 사용자에게 친절한 안내(예: "API 키가 유효하지 않습니다.")를 표시하도록 구현합니다.